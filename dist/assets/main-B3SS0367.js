import{s as u}from"./supabase-CSR-07Nq.js";class w{static async createDemoRequest(e){const{data:t,error:o}=await u.from("demo_requests").insert({...e,status:"new",metadata:e.metadata||{}}).select().single();if(o)throw console.error("Error creating demo request:",o),o;return t}static async getDemoRequests(e){let t=u.from("demo_requests").select("*").order("created_at",{ascending:!1});e!=null&&e.status&&(t=t.eq("status",e.status)),e!=null&&e.request_type&&(t=t.eq("request_type",e.request_type)),e!=null&&e.limit&&(t=t.limit(e.limit));const{data:o,error:s}=await t;if(s)throw console.error("Error fetching demo requests:",s),s;return o}static async updateDemoRequest(e,t){const{data:o,error:s}=await u.from("demo_requests").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw console.error("Error updating demo request:",s),s;return o}}let m={leads:[],addLead:function(r){this.leads.push(r),this.notifyChat(r)},notifyChat:function(r){setTimeout(()=>{window.chatWidget&&window.chatWidget.isOpen()&&window.chatWidget.addMessage("bot",`Hi ${r.name}! I see you just submitted a form. I'm here to help answer any questions about Agent Cory.`)},2e3)}};class B{constructor(){console.log("Chat widget replaced with LeadConnector")}isOpen(){return!1}openModal(e){const t=document.getElementById(e);if(t){t.classList.add("active"),document.body.style.overflow="hidden";const o=t.querySelector("input, select, textarea");o&&setTimeout(()=>o.focus(),100)}}addMessage(e,t){console.log(`Chat message (${e}): ${t}`)}bindModalEvents(){document.querySelectorAll(".modal-close").forEach(t=>{t.addEventListener("click",o=>{const s=o.target.closest(".modal");s&&this.closeModal(s)})}),document.addEventListener("click",t=>{t.target.classList.contains("modal")&&this.closeModal(t.target)})}closeModal(e){e.classList.remove("active"),document.body.style.overflow="",e.querySelectorAll("form").forEach(a=>a.reset()),e.querySelectorAll('[id$="-success"]').forEach(a=>a.style.display="none"),e.querySelectorAll("form").forEach(a=>a.style.display="block")}}class M{constructor(){this.inputs={monthlyInquiries:500,contactRate:45,conversionRate:25,avgTuition:25e3,staffCost:35,touchesPerLead:8,coryContactRate:92,responseUplift:25,automationCoverage:85},this.init()}init(){this.bindInputs(),this.bindSliders(),this.calculate(),console.log("ROI Calculator initialized")}bindInputs(){Object.entries({"monthly-inquiries":"monthlyInquiries","contact-rate":"contactRate","conversion-rate":"conversionRate","avg-tuition":"avgTuition","staff-cost":"staffCost","touches-per-lead":"touchesPerLead"}).forEach(([t,o])=>{const s=document.getElementById(t);s&&s.addEventListener("input",()=>{const a=parseFloat(s.value)||0;this.inputs[o]=a,this.calculate()})})}bindSliders(){[{id:"cory-contact-rate",valueId:"cory-contact-rate-value",key:"coryContactRate",suffix:"%"},{id:"response-uplift",valueId:"response-uplift-value",key:"responseUplift",prefix:"+",suffix:"%"},{id:"automation-coverage",valueId:"automation-coverage-value",key:"automationCoverage",suffix:"%"}].forEach(({id:t,valueId:o,key:s,prefix:a="",suffix:i=""})=>{const n=document.getElementById(t),c=document.getElementById(o);n&&c&&n.addEventListener("input",()=>{const l=parseFloat(n.value);this.inputs[s]=l,c.textContent=`${a}${l}${i}`,this.calculate()})})}calculate(){const{monthlyInquiries:e,contactRate:t,conversionRate:o,avgTuition:s,staffCost:a,touchesPerLead:i,coryContactRate:n,responseUplift:c,automationCoverage:l}=this.inputs,f=e*(t/100)*(o/100),b=f*.3,L=e*(n/100),I=o*(1+c/100),g=L*(I/100),C=g*.3,S=Math.round((g-f)*12),h=Math.round((C-b)*12),v=h*s,A=e*i*.1*(l/100),p=Math.round(A*12),D=p*a,d=36e3,y=v+D,E=y-d,F=Math.round(E/d*100),R={additionalApps:S,additionalEnrollments:h,tuitionLift:v,staffHoursSaved:p,annualROI:F,totalBenefit:y,platformCost:d,netBenefit:E};this.updateResults(R)}updateResults(e){const t={"additional-apps":this.formatNumber(e.additionalApps),"additional-enrollments":this.formatNumber(e.additionalEnrollments),"tuition-lift":this.formatCurrency(e.tuitionLift),"staff-hours-saved":this.formatNumber(e.staffHoursSaved),"annual-roi":this.formatPercentage(e.annualROI)};Object.entries(t).forEach(([o,s])=>{const a=document.getElementById(o);a&&(a.style.transform="scale(1.1)",a.style.transition="transform 0.2s ease-out",setTimeout(()=>{a.textContent=s,a.style.transform="scale(1)"},100))})}formatCurrency(e){return e>=1e6?`$${(e/1e6).toFixed(1)}M`:e>=1e3?`$${(e/1e3).toFixed(0)}K`:`$${e.toLocaleString()}`}formatNumber(e){return e.toLocaleString()}formatPercentage(e){return`${e}%`}}class x{constructor(){this.init()}init(){this.bindForms()}bindForms(){const e=document.getElementById("demo-request-form");e&&e.addEventListener("submit",n=>this.handleDemoForm(n));const t=document.getElementById("custom-ai-form");t&&t.addEventListener("submit",n=>this.handleCustomAIForm(n));const o=document.getElementById("call-demo-form");o&&o.addEventListener("submit",n=>this.handleCallForm(n));const s=document.getElementById("lead-magnet-form");s&&s.addEventListener("submit",n=>this.handleMagnetForm(n));const a=document.getElementById("call-time"),i=document.getElementById("custom-time-group");a&&i&&a.addEventListener("change",n=>{i.style.display=n.target.value==="custom"?"block":"none"})}handleDemoForm(e){if(e.preventDefault(),!this.validateForm(e.target))return;const t=new FormData(e.target),o=Object.fromEntries(t.entries());o.website||this.saveDemoRequest(o)}async saveDemoRequest(e){try{const t={first_name:e.firstName,last_name:e.lastName,email:e.email,phone:e.phone,institution:e.institution,occupation:e.occupation,request_type:"demo",metadata:{source:"demo_page",user_agent:navigator.userAgent,timestamp:new Date().toISOString()}};await w.createDemoRequest(t),console.log("Demo request saved to database:",t),document.getElementById("demo-request-form").style.display="none",document.getElementById("demo-success").style.display="block",m.addLead({type:"demo",name:`${e.firstName} ${e.lastName}`,email:e.email,institution:e.institution,timestamp:new Date})}catch(t){console.error("Error saving demo request:",t),this.showToast("Error submitting request. Please try again.","error")}}async handleCustomAIForm(e){if(e.preventDefault(),!this.validateForm(e.target))return;const t=new FormData(e.target),o=Object.fromEntries(t.entries());if(!o.website)try{const s={first_name:o.firstName,last_name:o.lastName,email:o.email,phone:o.phone,institution:o.institution,occupation:o.occupation,interest_area:o.interest,request_type:"custom_ai",metadata:{source:"custom_ai_modal",user_agent:navigator.userAgent,timestamp:new Date().toISOString()}};await w.createDemoRequest(s),console.log("Custom AI request saved to database:",s),e.target.style.display="none",document.getElementById("custom-ai-success").style.display="block"}catch(s){console.error("Error saving custom AI request:",s),this.showToast("Error submitting request. Please try again.","error")}}handleCallForm(e){if(e.preventDefault(),!this.validateForm(e.target))return;const t=new FormData(e.target),o=Object.fromEntries(t.entries());o.website||(console.log("Call demo request:",o),console.log("POST /api/call-demo",o),this.triggerDemoCall(o),m.addLead({type:"call-demo",name:o.name,phone:o.phone,timestamp:new Date}),e.target.style.display="none",document.getElementById("call-success").style.display="block",this.showToast("Cory is calling you now...","info"))}handleMagnetForm(e){if(e.preventDefault(),!this.validateForm(e.target))return;const t=new FormData(e.target),o=Object.fromEntries(t.entries());o.website||(console.log("Lead magnet request:",o),console.log("POST /api/lead-magnet",o),m.addLead({type:"lead-magnet",name:o.name,email:o.email,resourceId:o.resourceId,timestamp:new Date}),e.target.style.display="none",document.getElementById("magnet-success").style.display="block")}validateForm(e){let t=!0;return e.querySelectorAll("[required]").forEach(s=>{const a=s.closest(".form-group"),i=a==null?void 0:a.querySelector(".form-error");s.value.trim()?a==null||a.classList.remove("error"):(t=!1,a==null||a.classList.add("error"),i&&(i.textContent="This field is required")),s.type==="email"&&s.value&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value)||(t=!1,a==null||a.classList.add("error"),i&&(i.textContent="Please enter a valid email address"))),s.type==="tel"&&s.value&&s.value.replace(/\D/g,"").length<10&&(t=!1,a==null||a.classList.add("error"),i&&(i.textContent="Please enter a valid phone number"))}),t}triggerDemoCall(e){console.log("Triggering demo call with payload:",e),setTimeout(()=>{console.log("Demo call initiated to:",e.phone)},1e3)}showToast(e,t="info"){const o=document.createElement("div");o.className=`toast toast-${t}`,o.textContent=e,o.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--brand);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            z-index: 1001;
            animation: slideInRight 0.3s ease-out;
        `,document.body.appendChild(o),setTimeout(()=>{o.style.animation="slideOutRight 0.3s ease-out",setTimeout(()=>o.remove(),300)},3e3)}}class T{constructor(){this.init()}init(){this.bindNavToggle(),this.bindSmoothScroll(),this.updateActiveNav()}bindNavToggle(){const e=document.querySelector(".nav-toggle"),t=document.querySelector(".nav-menu");e&&t&&(e.addEventListener("click",()=>{e.classList.toggle("active"),t.classList.toggle("active")}),document.addEventListener("click",o=>{!e.contains(o.target)&&!t.contains(o.target)&&(e.classList.remove("active"),t.classList.remove("active"))}))}bindSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(o){o.preventDefault();const s=document.querySelector(this.getAttribute("href"));s&&s.scrollIntoView({behavior:"smooth",block:"start"})})}),document.querySelectorAll('[id*="custom-ai"]').forEach(t=>{t.addEventListener("click",()=>{window.chatWidget&&window.chatWidget.openModal("custom-ai-modal")})})}updateActiveNav(){const e=window.location.pathname;document.querySelectorAll(".nav-link").forEach(o=>{o.classList.remove("active"),(o.getAttribute("href")===e||e==="/"&&o.getAttribute("href")==="/")&&o.classList.add("active")})}}class k{constructor(){this.init()}init(){document.querySelectorAll(".accordion-header").forEach(o=>{o.addEventListener("click",()=>this.toggleAccordion(o))}),document.querySelectorAll(".faq-question").forEach(o=>{o.addEventListener("click",()=>this.toggleFAQ(o))})}toggleAccordion(e){const t=e.closest(".accordion-item");t.querySelector(".accordion-content");const o=t.classList.contains("active");document.querySelectorAll(".accordion-item").forEach(a=>{a!==t&&a.classList.remove("active")}),o?t.classList.remove("active"):t.classList.add("active")}toggleFAQ(e){const t=e.closest(".faq-item");t.classList.contains("active")?t.classList.remove("active"):t.classList.add("active")}}class _{constructor(){this.init()}init(){const e=document.getElementById("topic-filter"),t=document.getElementById("format-filter"),o=document.getElementById("clear-filters");e&&e.addEventListener("change",()=>this.filterResources()),t&&t.addEventListener("change",()=>this.filterResources()),o&&o.addEventListener("click",()=>this.clearFilters())}filterResources(){const e=document.getElementById("topic-filter"),t=document.getElementById("format-filter"),o=document.querySelectorAll(".resource-card"),s=(e==null?void 0:e.value)||"all",a=(t==null?void 0:t.value)||"all";o.forEach(i=>{const n=i.dataset.topic,c=i.dataset.format;(s==="all"||n===s)&&(a==="all"||c===a)?i.style.display="flex":i.style.display="none"})}clearFilters(){const e=document.getElementById("topic-filter"),t=document.getElementById("format-filter"),o=document.querySelectorAll(".resource-card");e&&(e.value="all"),t&&(t.value="all"),o.forEach(s=>{s.style.display="flex"})}}document.addEventListener("DOMContentLoaded",()=>{window.chatWidget=new B,window.chatWidget.bindModalEvents(),window.roiCalculator=new M,window.formHandler=new x,window.navigationHandler=new T,window.accordionHandler=new k,window.resourceFilter=new _,console.log("Agent Cory Marketing Site initialized")});
